<div ng-app="myApp" ng-controller="myCtrl">

<p ng-if="messageOfSaveStudent" class="ng-invalid">{{messageOfSaveStudent}}</p>

<div style="margin-bottom: 10px">
    <div class="col-md-4">
        <h4>Student Page: {{ currentPageStd }}</h4>
    </div>
    <div class="col-md-4"></div>
    <div class="col-md-4">
        <input ng-model="q1" id="search" class="form-control" placeholder="Filter text">
    </div>
</div>

<table align="center" class=" table table-bordered table-striped table-hover" >
    <tr>
        <th>Id</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Age</th>
        <th>Gpa</th>
        <th>Department</th>
        <th><i class="fas fa-archive"></i></th>
    </tr>
    <tr>
        <td> ...</td>
        <td> <input class="form-control" type="text" ng-model="student.firstName"> </td>
        <td> <input class="form-control" type="text" ng-model="student.lastName"> </td>
        <td> <input class="form-control" type="number" ng-model="student.age"> </td>
        <td> <input class="form-control" type="number" ng-model="student.gpa"> </td>
        <td> <select class="form-control" ng-model="selectedDepartmentOfStudent" ng-options="value.name for (key, value) in allDepartments"></select>
        </td>
        <td> <button ng-click="sendStudentData()" class=" btn btn-info"> <i class="fas fa-plus-square"></i>
                </button>
        </td>
    </tr>
    <tr dir-paginate="x in allStudents| filter:q1 | itemsPerPage: pageSize" current-page="currentPageStd" pagination-id="pagination1">

        <td>
            <button ng-click="setStudent(x.firstName, x.lastName, x.sections)" class="btn btn-success" data-toggle="modal" data-target="#purchaseModal2">{{x.id }}
            </button>

            <div class="modal fade" id="purchaseModal2" tabindex="-1" role="dialog" aria-labelledby="purchaseLabel2" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" id="purchaseLabel2">Student Detail</h4>
                        </div>
                        <div class="modal-body">
                            <p> Student     - "{{komplexStudent.student}}" </p>

                            <p> Classes The Student Has Registered </p>
                            <table class="table table-striped">
                                <tr>
                                    <th>Course</th>
                                    <th>Course Credit</th>
                                    <th>Department</th>
                                    <th>Instructor</th>
                                </tr>
                                <tr ng-repeat="y in komplexStudent.sections">

                                    <td> {{y.course.title}} - {{y.number}} </td>
                                    <td> {{y.course.credit }} </td>
                                    <td> {{y.course.department.name }} </td>
                                    <td> {{y.instructor.firstName }} {{y.instructor.lastName }} </td>
                                </tr>

                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </td>

        <td> {{x.firstName }} </td>
        <td> {{x.lastName }} </td>
        <td> {{x.age }} </td>
        <td> {{x.gpa }} </td>
        <td> {{x.department.code}} - {{x.department.name}}</td>
        <td align="center"> <button ng-click="deleteStudent(x.id,x.firstName,x.lastName)" class=" btn btn-danger"><i class="far fa-trash-alt"></i></button></td>
    </tr>
</table>

<div class="text-center">
    <dir-pagination-controls boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)" template-url="dirPagination.tpl.html" pagination-id="pagination1"></dir-pagination-controls>
</div>
</div>